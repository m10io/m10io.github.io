<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-playbooks/issuer" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Issuer | DRM Platform Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://m10io.github.io/playbooks/issuer"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Issuer | DRM Platform Documentation"><meta data-rh="true" name="description" content="Learn how to perform the tasks of an Issuer."><meta data-rh="true" property="og:description" content="Learn how to perform the tasks of an Issuer."><link data-rh="true" rel="icon" href="/img/atelio_favicon.png"><link data-rh="true" rel="canonical" href="https://m10io.github.io/playbooks/issuer"><link data-rh="true" rel="alternate" href="https://m10io.github.io/playbooks/issuer" hreflang="en"><link data-rh="true" rel="alternate" href="https://m10io.github.io/playbooks/issuer" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://DOOBFI1P9C-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="DRM Platform Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.6c181748.css">
<script src="/assets/js/runtime~main.df48f385.js" defer="defer"></script>
<script src="/assets/js/main.fe5505d9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/atelio_light.svg"><link rel="preload" as="image" href="/img/atelio_dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/atelio_light.svg" alt="Atelio Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/atelio_dark.svg" alt="Atelio Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">DRM Platform Documentation</b></a><a class="navbar__item navbar__link" href="/protodocs/sdk/model/model.proto">Protodocs</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Issuer</h1></header>
<p>Learn how to perform the tasks of an Issuer.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integrate-with-the--platform">Integrate with the <span>DRM</span> platform<a href="#integrate-with-the--platform" class="hash-link" aria-label="Direct link to integrate-with-the--platform" title="Direct link to integrate-with-the--platform">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>This playbook outlines the process of creating a service to integrate a banking system with the <span>DRM</span> ledger system. The service receives messages or webhooks from the internal banking system, then creates and/or updates <span>DRM</span> resources. The service also has an interface for client applications such as a mobile app or web portal. This interface is used to request user onboarding, deposits and withdrawals, and other resource handling.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integration-tools">Integration tools<a href="#integration-tools" class="hash-link" aria-label="Direct link to Integration tools" title="Direct link to Integration tools">​</a></h3>
<p>The <span>DRM</span> Client SDK is the main integration tool used to connect internal banking systems with the <span>DRM</span> ledger system. The SDKs currently supported are:</p>
<p>[<span>DRM</span> Rust SDK](<a href="https://crates.io/crates/" target="_blank" rel="noopener noreferrer">https://crates.io/crates/</a><span>DRM</span>-sdk)
[<span>DRM</span> Dart SDK](<a href="https://pub.dev/packages/" target="_blank" rel="noopener noreferrer">https://pub.dev/packages/</a><span>DRM</span>_sdk)
[<span>DRM</span> Node.js SDK](<a href="https://www.npmjs.com/package/" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/</a><span>DRM</span>-sdk)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-examples">Code examples<a href="#code-examples" class="hash-link" aria-label="Direct link to Code examples" title="Direct link to Code examples">​</a></h3>
<p>Examples throughout this document will use the <span>DRM</span> Dart SDK. The same methods are implemented in the Node.js SDK.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-the-account-structure">Understanding the account structure<a href="#understanding-the-account-structure" class="hash-link" aria-label="Direct link to Understanding the account structure" title="Direct link to Understanding the account structure">​</a></h3>
<p>Understanding the account structure of the <span>DRM</span> ledger is important. If you&#x27;ve read the <a href="/overview">Overview</a>, here follows another level of detail:</p>
<!-- -->
<p>The hierarchical <span>DRM</span> ledger has two types of accounts:</p>
<table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><strong>issuance accounts</strong></td><td>An issuance account can not have a balance higher than zero (0). When an issuance account transfers funds (&quot;issues&quot; funds) to a holding account, the issuance account balance goes negative and the holding account balance increases.</td></tr><tr><td><strong>holding accounts</strong></td><td>Holding accounts are children of issuance accounts.</td></tr></tbody></table>
<p>An entity (such as a bank) on the <span>DRM</span> ledger can have both a holding account and an issuance account.</p>
<p>Transfers between two accounts traverse the account hierarchy to find the path between two accounts. For more details, see <a href="/api/transfers">Transfers</a>.</p>
<p>An issuance account with child accounts (holding accounts) can obtain a recursive sum of all the child accounts balances in the <code>issuance.issued_balance</code> field. This is useful for a bank or central bank to query all the money issued to its child accounts.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>There is a system limit of <strong>256 root accounts</strong>. Plan your issuance hierarchy accordingly.</p></div></div>
<p>The diagram below outlines the basic account structure of the hierarchical <span>DRM</span> ledger. The USD root account, which is provided by the currency sponsor (central bank, or one or more appointed commercial banks), has no balance because it&#x27;s at the root of the hierarchy but is negative 200 in issuance, meaning it has issued a total of 200 to child accounts:</p>
<ul>
<li>Tungsten Bank has a balance of 90.</li>
<li>Iron Bank has balances of 110</li>
<li>The sum of 90 + 110 being 200, which matches the negative issuing balance of the root account.</li>
</ul>
<p>Tungsten Bank has issued 500 to its child accounts, which include its own holding account and the holding accounts of Alice and Bob. Likewise, Iron Bank issued 100 to Chris (30) and Diego (70).</p>
<p>For Iron Bank to create a new ledger account for one of its customers, it would create it under its issuance account. To fund the new account, Iron Bank would create a transfer from its issuance account to the user&#x27;s holding account (from parent account to child account).</p>
<p>In this example, the hierarchical ledger has three levels. However, the number of levels is technically unlimited.</p>
<p><img decoding="async" loading="lazy" alt="Account hierarchy" src="/assets/images/account-hierarchy-fd9a4c3aefc2104f8e8c2a907a9706db.svg" width="2009" height="963" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="main-issuer-activities">Main Issuer activities<a href="#main-issuer-activities" class="hash-link" aria-label="Direct link to Main Issuer activities" title="Direct link to Main Issuer activities">​</a></h2>
<p>As an Issuer, you typically perform the following activities:</p>
<ol>
<li><a href="#onboard-customers">Onboard customer</a></li>
<li><a href="#offboard-customers">Offboard customer</a></li>
<li><a href="#issue-digital-money">Issue digital money to a customer</a></li>
<li><a href="#redeem-digital-money">Redeem digital money for a customer</a></li>
<li><a href="#freeze-ledger-account">Freeze a customer account</a></li>
<li><a href="#facilitate-an-account-recovery-request-by-a-customer">Facilitate an account recovery request by a customer</a></li>
</ol>
<p>Below we&#x27;ll explain each activity and provide data flows and example code.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="onboard-customers">Onboard customers<a href="#onboard-customers" class="hash-link" aria-label="Direct link to Onboard customers" title="Direct link to Onboard customers">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="onboarding-data-flow">Onboarding data flow<a href="#onboarding-data-flow" class="hash-link" aria-label="Direct link to Onboarding data flow" title="Direct link to Onboarding data flow">​</a></h4>
<p>In this example we assume that the user&#x27;s Issuer, or PSP requests KYC of the user. However, other scenarios are also possible.</p>
<!-- -->
<br>
<br>
<!-- -->
<p>Onboarding a customer to the <span>DRM</span> Platform means creating an account for the customer on the ledger and assign the apropriate permissions (which may be changed later). Optionally, a directory alias can be added to make it easier to address the user when transfering digital money. The party onboarding the user (e.g. PSP) is responsible for complying with local KYC/KYB regulations.</p>
<p>The steps to onboard a user include:</p>
<ul>
<li>Have the user generate a cryptographic key pair</li>
<li>Create a ledger account</li>
<li>Create a role binding (optional)</li>
<li>Create alias (optional) (see section <a href="#managing-user-aliases">Managing user aliases</a>).</li>
</ul>
<p>Each user with their own ledger account, should have a cryptographic key pair that is generated by the account holder. The resulting private key must be stored securely with the account holder and the public key is used during the account creation process.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Why Users Should Generate Their Own Cryptographic Keys</strong></p><p>To ensure the highest level of security and control over API interactions, it is strongly recommend that users generate their own cryptographic key pairs. This key pair consists of a public key and a private key.</p><p><strong>Why Self-Generated Keys Matter:</strong></p><ul>
<li><strong>Reduced Risk of Compromise:</strong> By generating their own keys, users minimize the risk of the keys falling into the wrong hands.</li>
<li><strong>Stronger Authentication:</strong> Using a self-generated private key for digital signatures strengthens the authentication process.</li>
<li><strong>Full Ownership:</strong> Complete ownership and control over keys, ensuring data remains secure.</li>
<li><strong>Flexibility:</strong> Manage and rotate keys as needed, adapting to evolving security best practices.</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-generate-keys">How to Generate Keys<a href="#how-to-generate-keys" class="hash-link" aria-label="Direct link to How to Generate Keys" title="Direct link to How to Generate Keys">​</a></h4>
<p>The <span>DRM</span> SDKs and CLI provide functions for key generation. The <span>DRM</span> mobile SDK stores the private key in the mobile device&#x27;s secure element, or trusted execution environment (TEE).</p>
<p>The key pair should be in the PKCS8 format. If Alice were to generate a key pair, she would enter the following command:</p>
<div class="code"><div><ul class="tabs codeTabs"><li class="tabs__item">CLI</li><li class="tabs__item">TypeScript</li><li class="tabs__item tabs__item--active">Rust</li></ul><div class="code-inner"><div class="cm-theme"></div><div class="buttonGroup"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="react-slidedown"><div class="modeline"><span class="mode modeBlock">M10 REPL</span><span class="status modeBlock">FOO</span></div><div class="output"><pre></pre></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="output">Output<a href="#output" class="hash-link" aria-label="Direct link to Output" title="Direct link to Output">​</a></h4>
<p>The output would be something like:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">created key pair file: &quot;alice.pkcs8&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public key is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;hOJIkyqJ7/dUStWzcgj+afT1dBvJKczPvl5q70MpMaY=&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-ledger-account">Create ledger account<a href="#create-ledger-account" class="hash-link" aria-label="Direct link to Create ledger account" title="Direct link to Create ledger account">​</a></h4>
<p>Now that the user who should get a ledger account has a key pair, the bank can create the account.</p>
<p>To create an account on the ledger:</p>
<div class="code"><div><ul class="tabs codeTabs"><li class="tabs__item tabs__item--active">Rust</li><li class="tabs__item">TypeScript</li><li class="tabs__item">Dart</li><li class="tabs__item">CLI</li></ul><div class="code-inner"><div class="cm-theme"></div><div class="buttonGroup"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="react-slidedown"><div class="modeline"><span class="mode modeBlock">M10 REPL</span><span class="status modeBlock">FOO</span></div><div class="output"><pre></pre></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-accountset">Create AccountSet<a href="#create-accountset" class="hash-link" aria-label="Direct link to Create AccountSet" title="Direct link to Create AccountSet">​</a></h4>
<p>Optionally...</p>
<p>&quot;[insert code sample]&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-role-binding">Create role binding<a href="#create-role-binding" class="hash-link" aria-label="Direct link to Create role binding" title="Direct link to Create role binding">​</a></h4>
<p>We will assume that the issuer already has created a role for its customers called <code>customer-role</code>. This role gives associated subjects permissions to their accounts. In this case, the permissions of the customer-role is <code>READ</code>, <code>TRANSACT</code>, and <code>UPDATE</code>. See the documentation about <a href="/api/roles">Roles</a> for more information.</p>
<p>To bind the role <code>customer-role</code> to Alice, we perform the following command:</p>
<div class="code"><div><ul class="tabs codeTabs"><li class="tabs__item tabs__item--active">Rust</li><li class="tabs__item">TypeScript</li><li class="tabs__item">Dart</li><li class="tabs__item">CLI</li></ul><div class="code-inner"><div class="cm-theme"></div><div class="buttonGroup"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="react-slidedown"><div class="modeline"><span class="mode modeBlock">M10 REPL</span><span class="status modeBlock">FOO</span></div><div class="output"><pre></pre></div></div></div>
<h1></h1>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-alias">Create alias<a href="#create-alias" class="hash-link" aria-label="Direct link to Create alias" title="Direct link to Create alias">​</a></h4>
<p>Now that we&#x27;ve created the user Alice with an account and permissions to access her account, we can create an alias, so she&#x27;s easier to find the <span>DRM</span> Directory. We will use Alice&#x27;s phone number, <code>+1 555-555-5555</code>.</p>
<p>&quot;[insert code sample]&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="onboarding-code-example">Onboarding code example<a href="#onboarding-code-example" class="hash-link" aria-label="Direct link to Onboarding code example" title="Direct link to Onboarding code example">​</a></h4>
<p>Let&#x27;s put all the onboarding code together. In this code example we focus on the interactions between the PSP and the <span>DRM</span> platform and KYC partner.</p>
<div class="code"><div><ul class="tabs codeTabs"><li class="tabs__item">CLI</li><li class="tabs__item">TypeScript</li><li class="tabs__item tabs__item--active">Rust</li></ul><div class="code-inner"><div class="cm-theme"></div><div class="buttonGroup"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="react-slidedown"><div class="modeline"><span class="mode modeBlock">M10 REPL</span><span class="status modeBlock">FOO</span></div><div class="output"><pre></pre></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="offboard-customers">Offboard customers<a href="#offboard-customers" class="hash-link" aria-label="Direct link to Offboard customers" title="Direct link to Offboard customers">​</a></h3>
<!-- -->
<p>Offboarding a customer means disabling the <span>DRM</span> account from receiving, or sending funds transfer, or perform any action on the account and deactivate the alias entry. For compliance reasons, an account isn&#x27;t deleted, but rather made unavailable. Before disabling an account, the balance must be zero.</p>
<p>Steps to offboard a user:</p>
<ul>
<li>Disable user&#x27;s ledger account</li>
<li>Deactivate alias registry</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="offboarding-data-flow">Offboarding data flow<a href="#offboarding-data-flow" class="hash-link" aria-label="Direct link to Offboarding data flow" title="Direct link to Offboarding data flow">​</a></h4>
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="offboarding-code-example">Offboarding code example<a href="#offboarding-code-example" class="hash-link" aria-label="Direct link to Offboarding code example" title="Direct link to Offboarding code example">​</a></h4>
<div class="code"><div><ul class="tabs codeTabs"><li class="tabs__item">CLI</li><li class="tabs__item">TypeScript</li><li class="tabs__item tabs__item--active">Rust</li></ul><div class="code-inner"><div class="cm-theme"></div><div class="buttonGroup"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="react-slidedown"><div class="modeline"><span class="mode modeBlock">M10 REPL</span><span class="status modeBlock">FOO</span></div><div class="output"><pre></pre></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="issue-digital-money">Issue digital money<a href="#issue-digital-money" class="hash-link" aria-label="Direct link to Issue digital money" title="Direct link to Issue digital money">​</a></h3>
<p>Issuing money  (or digital asset) means transferring funds from an issuing account to a holding account.  The starting point is that issuing account has a balance of zero (0). When issuing funds to a holding account, the balance of the issuing account goes negative and the balance of the holding account goes positive. To illustrate, we have three issuing transactions in the amounts 100 (to Alice), 50 (to Bob) and 40 (10 to Alice and 30 to Bob).</p>
<table><thead><tr><th style="text-align:right">Transaction</th><th style="text-align:right">Amount</th><th style="text-align:right">Issuing account</th><th style="text-align:right">Alice&#x27;s holding account</th><th style="text-align:right">Bob&#x27;s holding account</th></tr></thead><tbody><tr><td style="text-align:right">0</td><td style="text-align:right">0</td><td style="text-align:right">0</td><td style="text-align:right">0</td><td style="text-align:right">0</td></tr><tr><td style="text-align:right">1</td><td style="text-align:right">100</td><td style="text-align:right">-100</td><td style="text-align:right">100</td><td style="text-align:right">0</td></tr><tr><td style="text-align:right">2</td><td style="text-align:right">50</td><td style="text-align:right">- 150</td><td style="text-align:right">100</td><td style="text-align:right">50</td></tr><tr><td style="text-align:right">3</td><td style="text-align:right">40</td><td style="text-align:right">- 190</td><td style="text-align:right">110</td><td style="text-align:right">80</td></tr></tbody></table>
<p>An issuer can issue funds to its own holding account, or a customer&#x27;s holding account.</p>
<p>Assumptions:</p>
<ul>
<li>Issuer is a bank, or PSP issuing deposit tokens or stablecoins.</li>
<li>The user has been onboarded</li>
<li>The user holds deposits with the issuer (the issuer is the user&#x27;s bank)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issuing-data-flow">Issuing data flow<a href="#issuing-data-flow" class="hash-link" aria-label="Direct link to Issuing data flow" title="Direct link to Issuing data flow">​</a></h4>
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issuing-code-example">Issuing code example<a href="#issuing-code-example" class="hash-link" aria-label="Direct link to Issuing code example" title="Direct link to Issuing code example">​</a></h4>
<div class="code"><div><ul class="tabs codeTabs"><li class="tabs__item">CLI</li><li class="tabs__item">TypeScript</li><li class="tabs__item tabs__item--active">Rust</li></ul><div class="code-inner"><div class="cm-theme"></div><div class="buttonGroup"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="react-slidedown"><div class="modeline"><span class="mode modeBlock">M10 REPL</span><span class="status modeBlock">FOO</span></div><div class="output"><pre></pre></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="redeem-digital-money">Redeem digital money<a href="#redeem-digital-money" class="hash-link" aria-label="Direct link to Redeem digital money" title="Direct link to Redeem digital money">​</a></h3>
<p>Redeeming digital money (or digital asset) is the reverse of issuing digital money — a holder of digital money requests the exchange of digital money for bank deposits. The request may come from the user directly, or through a PSP serving the user.</p>
<p>Assumption: Issuer is a bank, or PSP redeeming deposit tokens or stablecoins.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="redemption-data-flow">Redemption data flow<a href="#redemption-data-flow" class="hash-link" aria-label="Direct link to Redemption data flow" title="Direct link to Redemption data flow">​</a></h4>
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="redemption-code-example">Redemption code example<a href="#redemption-code-example" class="hash-link" aria-label="Direct link to Redemption code example" title="Direct link to Redemption code example">​</a></h4>
<div class="code"><div><ul class="tabs codeTabs"><li class="tabs__item">CLI</li><li class="tabs__item">TypeScript</li><li class="tabs__item tabs__item--active">Rust</li></ul><div class="code-inner"><div class="cm-theme"></div><div class="buttonGroup"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="react-slidedown"><div class="modeline"><span class="mode modeBlock">M10 REPL</span><span class="status modeBlock">FOO</span></div><div class="output"><pre></pre></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="freeze-ledger-account">Freeze ledger account<a href="#freeze-ledger-account" class="hash-link" aria-label="Direct link to Freeze ledger account" title="Direct link to Freeze ledger account">​</a></h2>
<p>An account that has been <code>frozen</code> can no longer send, or receive funds. The balance of the account is not changed while the account is frozen.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="freeze-ledger-account-code-example">Freeze ledger account code example<a href="#freeze-ledger-account-code-example" class="hash-link" aria-label="Direct link to Freeze ledger account code example" title="Direct link to Freeze ledger account code example">​</a></h4>
<div class="code"><div><ul class="tabs codeTabs"><li class="tabs__item">CLI</li><li class="tabs__item">TypeScript</li><li class="tabs__item tabs__item--active">Rust</li></ul><div class="code-inner"><div class="cm-theme"></div><div class="buttonGroup"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="react-slidedown"><div class="modeline"><span class="mode modeBlock">M10 REPL</span><span class="status modeBlock">FOO</span></div><div class="output"><pre></pre></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-user-aliases">Managing user aliases<a href="#managing-user-aliases" class="hash-link" aria-label="Direct link to Managing user aliases" title="Direct link to Managing user aliases">​</a></h2>
<!-- -->
<p>This is text for managing aliases</p>
<p>(Imported from <code>../partials/_aliases.mdx</code>. REMOVE WHEN COMPLETED)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="facilitate-an-account-recovery-request-by-a-customer">Facilitate an account recovery request by a customer<a href="#facilitate-an-account-recovery-request-by-a-customer" class="hash-link" aria-label="Direct link to Facilitate an account recovery request by a customer" title="Direct link to Facilitate an account recovery request by a customer">​</a></h2>
<!-- -->
<p>This is text for account recovery</p>
<p>(Imported from <code>../partials/_account-recovery-request.mdx</code>. REMOVE WHEN COMPLETED)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="manage-private-keys">Manage private keys<a href="#manage-private-keys" class="hash-link" aria-label="Direct link to Manage private keys" title="Direct link to Manage private keys">​</a></h2>
<!-- -->
<p>On the <span>DRM</span> platform, private keys are used to generate digital signatures, which are required to authenticate and authorize transactions on the blockchain.</p>
<p>Each participant has at least one private key.</p>
<p>Banks, Payment Service Providers (PSPs) and developers must implement the utmost security measures to protect their private keys, which are critical for maintaining the integrity and confidentiality of their API communications. Here are some best practices:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-generation-and-storage">Key Generation and Storage<a href="#key-generation-and-storage" class="hash-link" aria-label="Direct link to Key Generation and Storage" title="Direct link to Key Generation and Storage">​</a></h3>
<ul>
<li><strong>Hardware Security Modules (HSMs):</strong> The most secure way to generate, store, and use private keys is within specialized hardware devices called HSMs. HSMs are designed to be tamper-resistant and offer robust cryptographic capabilities.</li>
<li><strong>Key Management Systems (KMS):</strong> Implement a KMS to manage the lifecycle of the private keys. This includes key generation, storage, rotation, and revocation. The KMS should enforce strict access controls and audit trails.</li>
<li><strong>Secure Enclaves:</strong> If HSMs are not feasible, consider using secure enclaves (e.g., Trusted Platform Modules or Intel SGX) within servers to provide an isolated and protected environment for key storage.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="access-controls-and-authorization">Access Controls and Authorization<a href="#access-controls-and-authorization" class="hash-link" aria-label="Direct link to Access Controls and Authorization" title="Direct link to Access Controls and Authorization">​</a></h3>
<ul>
<li><strong>Least Privilege:</strong> Employ the principle of least privilege, granting only the minimum necessary access to the private keys to authorized personnel and systems.
Role-Based Access Control (RBAC): Implement RBAC to define and enforce different access levels for various roles involved in key management and API operations.</li>
<li><strong>Strong Authentication:</strong> Enforce strong multi-factor authentication (MFA) for any personnel accessing or managing private keys.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-rotation-and-revocation">Key Rotation and Revocation<a href="#key-rotation-and-revocation" class="hash-link" aria-label="Direct link to Key Rotation and Revocation" title="Direct link to Key Rotation and Revocation">​</a></h3>
<ul>
<li><strong>Regular Rotation:</strong> Rotate private keys at regular intervals to minimize the impact of a potential key compromise. Establish a clear key rotation policy and schedule.</li>
<li><strong>Revocation Mechanism:</strong> Implement a robust mechanism to revoke compromised or expired private keys immediately.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-and-auditing">Monitoring and Auditing<a href="#monitoring-and-auditing" class="hash-link" aria-label="Direct link to Monitoring and Auditing" title="Direct link to Monitoring and Auditing">​</a></h3>
<ul>
<li><strong>Logging and Monitoring:</strong> Maintain comprehensive logs of all key-related activities, including access attempts, usage, and changes. Continuously monitor these logs for any suspicious activity.</li>
<li><strong>Regular Audits:</strong> Conduct regular audits of the key management system and processes to ensure compliance with security policies and identify any potential weaknesses.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional-considerations">Additional Considerations<a href="#additional-considerations" class="hash-link" aria-label="Direct link to Additional Considerations" title="Direct link to Additional Considerations">​</a></h3>
<ul>
<li><strong>Secure Communication:</strong> Ensure that all API communication channels are encrypted using strong protocols (e.g., TLS 1.3) to prevent eavesdropping or tampering.
Incident Response Plan: Develop and regularly test an incident response plan to address any potential security breaches or key compromises promptly.</li>
<li><strong>Compliance:</strong> Adhere to relevant industry standards and regulations (e.g., PCI DSS, PSD2) for private key management and API security.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="generate-reports">Generate reports<a href="#generate-reports" class="hash-link" aria-label="Direct link to Generate reports" title="Direct link to Generate reports">​</a></h2></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#integrate-with-the--platform" class="table-of-contents__link toc-highlight">Integrate with the <productname></productname> platform</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#integration-tools" class="table-of-contents__link toc-highlight">Integration tools</a></li><li><a href="#code-examples" class="table-of-contents__link toc-highlight">Code examples</a></li><li><a href="#understanding-the-account-structure" class="table-of-contents__link toc-highlight">Understanding the account structure</a></li></ul></li><li><a href="#main-issuer-activities" class="table-of-contents__link toc-highlight">Main Issuer activities</a><ul><li><a href="#onboard-customers" class="table-of-contents__link toc-highlight">Onboard customers</a></li><li><a href="#offboard-customers" class="table-of-contents__link toc-highlight">Offboard customers</a></li><li><a href="#issue-digital-money" class="table-of-contents__link toc-highlight">Issue digital money</a></li><li><a href="#redeem-digital-money" class="table-of-contents__link toc-highlight">Redeem digital money</a></li></ul></li><li><a href="#freeze-ledger-account" class="table-of-contents__link toc-highlight">Freeze ledger account</a></li><li><a href="#managing-user-aliases" class="table-of-contents__link toc-highlight">Managing user aliases</a></li><li><a href="#facilitate-an-account-recovery-request-by-a-customer" class="table-of-contents__link toc-highlight">Facilitate an account recovery request by a customer</a></li><li><a href="#manage-private-keys" class="table-of-contents__link toc-highlight">Manage private keys</a><ul><li><a href="#key-generation-and-storage" class="table-of-contents__link toc-highlight">Key Generation and Storage</a></li><li><a href="#access-controls-and-authorization" class="table-of-contents__link toc-highlight">Access Controls and Authorization</a></li><li><a href="#key-rotation-and-revocation" class="table-of-contents__link toc-highlight">Key Rotation and Revocation</a></li><li><a href="#monitoring-and-auditing" class="table-of-contents__link toc-highlight">Monitoring and Auditing</a></li><li><a href="#additional-considerations" class="table-of-contents__link toc-highlight">Additional Considerations</a></li></ul></li><li><a href="#generate-reports" class="table-of-contents__link toc-highlight">Generate reports</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>